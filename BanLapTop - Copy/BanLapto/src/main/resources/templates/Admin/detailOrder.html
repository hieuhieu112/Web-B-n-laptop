<!doctype html>
<html lang="en" xmlns:th="https://www.thymeleaf.com">

<head th:insert="Admin/import.html">

<body>
	<div class = "all" style = "display: flex;">
		<div th:insert="Admin/slideBar.html" style="height: 100%;"> </div>
		<div class ="wrapper-table-list-customer">

			<section>
			
				<div class="container" style ="display: flex;">				
					<div class="row d-flex justify-content-center align-items-center h-100 w-100">
						<div class="col-lg-12 col-xl-11">
							<div class="text-black" style="border-radius: 25px;">
								<div class="card-body p-md-5" style="padding-top: 0px !important;">
									<div class="row" style ="justify-content: flex-start;">
										<div class="col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1">

											<p class="text-center h1 fw-bold mx-1 mx-md-4">Phiếu đặt/Hoá đơn</p>
											<p class="text-center h5">ID:[[${order.id}]]</p>
											<form class="mx-1 mx-md-4" th:action="@{/Admin/saveOrder}" method="post">
												
												<div class="d-flex flex-row align-items-center mb-4">
													<i class="fas fa-user fa-lg me-3 fa-fw"></i>
													<div class="form-outline flex-fill mb-0">
														<input type="text" id="form3Example1c" class="form-control" name="orderdate" th:value="@{${order.customer.id}}" readonly="readonly"/>
														<label class="form-label" for="form3Example1c">ID khách hàng</label>
													</div>
												</div>

												<div class="d-flex flex-row align-items-center mb-4">
													<i class="fas fa-user fa-lg me-3 fa-fw"></i>
													<div class="form-outline flex-fill mb-0">
														<input type="date" id="form3Example1c" class="form-control" name="orderdate" th:value="@{${order.orderdate}}" readonly="readonly"/>
														<label class="form-label" for="form3Example1c">Ngày đặt</label>
													</div>
												</div>
												
												<div class="d-flex flex-row align-items-center mb-4">
													<i class="fas fa-user fa-lg me-3 fa-fw"></i>
													<div class="form-outline flex-fill mb-0">														
														<label class="form-label" for="form3Example1c">Tổng tiền:   [[${#numbers.formatInteger(amount,0)}]] $</label>
													</div>
												</div>		
												
												<div class="d-flex flex-row align-items-center mb-4">
													<i class="fas fa-user fa-lg me-3 fa-fw"></i>
													<div class="form-outline flex-fill mb-0">
														<input type="text" id="form3Example1c" class="form-control" name="receiver" th:value="@{${order.receiver}}" readonly="readonly"/>
														<label class="form-label" for="form3Example1c">Người nhận</label>
													</div>
												</div>			
													
												
												<div class="d-flex flex-row align-items-center mb-4">
													<i class="fas fa-user fa-lg me-3 fa-fw"></i>
													<div class="form-outline flex-fill mb-0">
														<input type="text" id="form3Example1c" class="form-control" name="address" th:value="@{${order.address}}" readonly="readonly"/>
														<label class="form-label" for="form3Example1c">Địa chỉ</label>
													</div>
												</div>
												
												<div class="d-flex flex-row align-items-center mb-4">
													<i class="fas fa-user fa-lg me-3 fa-fw"></i>
													<div class="form-outline flex-fill mb-0">
														<label class="form-label" for="form3Example1c">Mô tả</label>
														<p id="dess">[[${order.description}]]</p>
													</div>
												</div>
												
												<div class="d-flex flex-row align-items-center mb-4">
													<i class="fas fa-user fa-lg me-3 fa-fw"></i>
													<div class="form-outline flex-fill mb-0">
														<div class="d-flex">
															<th:block th:if="${order.status} != 3">
																<select name="status">
																	<th:block th:if = "${order.status} == 0">
																		<option th:value="0"  selected="selected">Đã huỷ</option>
																	</th:block>
																	<th:block th:unless= "${order.status} == 0">
																		<option th:value="0" >đã huỷ</option>
																	</th:block>
																	
																	<th:block th:if = "${order.status} == 1">
																		<option th:value="1"  selected="selected">đang xử lý</option>
																	</th:block>
																	<th:block th:unless= "${order.status} == 1">
																		<option th:value="1" >đang xử lý</option>
																	</th:block>
																	
																	<th:block th:if = "${order.status} == 2">
																		<option th:value="2"  selected="selected">đang vận chuyển</option>
																	</th:block>
																	<th:block th:unless= "${order.status} == 2">
																		<option th:value="2" >đang vận chuyển</option>
																	</th:block>
																	
																	
																												  	
																</select>
																<button type="submit" class="btn btn-primary btn-lg">Lưu</button>
															</th:block>
															
																<th:block th:if= "${order.status} == 3">
																	<b>Đơn đã hoàn thành</b>
																	
																	
																</th:block>
															
														</div>
														
														
														<label class="form-label" for="form3Example1c">Trạng thái đơn hàng</label>
													</div>
												</div>
												
												<div class="d-flex flex-row align-items-center mb-4">
													<i class="fas fa-user fa-lg me-3 fa-fw"></i>
													<div class="form-outline flex-fill mb-0">
														<input type="number" id="form3Example1c" class="form-control" name="numberphone" th:value="@{${order.numberphone}}" readonly="readonly"/>
														<label class="form-label" for="form3Example1c">số điện thoại người nhận</label>
													</div>
												</div>
												
												<div class="d-flex flex-row align-items-center mb-4">
													<i class="fas fa-user fa-lg me-3 fa-fw"></i>
													<div class="form-outline flex-fill mb-0">
														<th:block th:if="${order.employee} != null">
															<input type="text" id="form3Example1c" class="form-control" name="idEmployee" th:value="@{${order.employee.id}}" readonly="readonly"/>
														</th:block>
														<th:block th:if="${order.employee} == null">
															<input type="text" id="form3Example1c" class="form-control" name="idEmployee" value="Chưa rõ" readonly="readonly"/>
														</th:block>
														<label class="form-label" for="form3Example1c">ID Nhân viên</label>
													</div>
												</div>
											</form>

										</div>
										
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			
				<div class ="wrapper-table-list-customer" style="margin-left: 0; margin-bottom: 30px;">
					<h2>Chi tiết hóa đơn</h2>
					
					<table class="table table-hover">
						<thead style="background-color: #353a40; color: #ccc;">
							<tr>
								<th>id</th>
								<th>Số lượng</th>
								<th>Giá đơn vị</th>
								<th>Giảm giá</th>
								<th>Tên sản phẩm</th>
								<th></th>
							</tr>
						</thead>
						<tbody th:each="o : ${listOrdeDetail}">
						
							<tr>						
								<td>[[${o.id}]]</td>
								<td>[[${o.quantity}]]</td>
								<td>[[${o.unitprice}]]</td>
								<th:block th:if="${o.discount} != 0">
									<td>[[${(o.discount) *100}]]%</td>
								</th:block>
								<th:block th:unless="${o.discount} != 0">
									<td>0</td>
								</th:block>
								<td>[[${o.product.nameproduct}]]</td>
								<td>
									<a th:href="@{/Admin/Product/{id}(id=${o.product.id})}">
										<i class="fa-solid fa-circle-info" style="color: #1e3050;"></i>
									</a>
									
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</section>
		</div>
	</div>
	
	<script>
		var des = document.querySelector("#dess");
		des.innerHTML = des.getAttribute('vall');
	</script>
	
	<script th:src="@{../../js/jquery.min.js}"></script>
	<script th:src="@{../../js/popper.js}"></script>
	<script th:src="@{../../js/bootstrap.min.js}"></script>
	<script th:src="@{../../js/main.js}"></script>
	<script>
		qltk = document.querySelector(".qldh");
		qltk.classList.add("active")
		qltk.classList.add("li-con")
		
		qltk1 = document.querySelector(".qldh1");
		qltk1.classList.add("active")
		qltk1 = document.querySelector(".qldh1");
		qltk1.classList.add("li-con")
	</script>

</body>

</html>